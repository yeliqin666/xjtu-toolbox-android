# 图书馆座位推荐方案

## 现状
- 13个区域，实时查询空座（`scount` 返回每区域 空座/总数）
- `recommendSeats()` 已实现但未接入 UI
- 现有算法按座位号首字母分组=同排 → **错误假设**（座位可能蛇形/圆桌/跨隔板编号）
- 座位号本身**无法推断空间邻近关系**

## 方案设计

### 第一层：区域级推荐（零成本，立即可做）
- `scount` 已有全部区域空座统计
- 按空座率排序 → "推荐去XX区域（空座率最高）"
- 给区域加静态标签：安静/有电源/靠窗/大桌

### 第二层：平面图可视化 + 空间感知推荐
1. 每个区域提供一张 JPG 平面图 → `assets/` 目录
2. 写标注辅助工具（网页）：点击图片标注每个座位的 (x, y) 坐标
3. 可选标注：靠墙(wall) / 靠窗(window) / 有电源(power)
4. 导出 JSON 座位坐标：
   ```json
   {
     "north2east": {
       "image": "floor_north2east.jpg",
       "seats": {
         "A001": {"x": 120, "y": 340, "tags": ["wall", "power"]},
         "A002": {"x": 150, "y": 340, "tags": []}
       }
     }
   }
   ```
5. App 显示平面图 + 绿/红圆点叠加（空/占）
6. 推荐算法：找周围 N 像素内空座最多的座位（真正物理邻近）

### 第三层：定时抢座（WorkManager）
- 用户设置目标座位/区域 + 开馆时间
- WorkManager 精确定时 → 开馆瞬间自动预约
- 需处理：失败重试、结果通知、登录态保持

## 依赖
- 平面图 JPG（每区域一张，含座位号标注）
- 标注工具产出的坐标 JSON
- WorkManager（定时抢座）

## 优先级
1. ✅ 区域推荐（不需要额外资源）
2. ⏳ 平面图标注（等用户提供图片）
3. ⏳ 定时抢座（需 WorkManager 基础设施）
