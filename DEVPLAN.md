# XJTU Toolbox 开发计划

> 上次更新：2025-01

---

## 已完成 ✅

### v1.1-beta
- [x] 15 项深度优化（登录加速、缓存、连接池、状态持久化、ViewModel 迁移等）
- [x] 缓存安全机制（课表更新 Snackbar、考试仅缓存旧学期、离线提示、TTL 控制）
- [x] 成绩页 SWR 缓存 + 进度指示器 + 新成绩提醒
- [x] 课表时间线指示器（当前周红线标注当前时间）
- [x] 校园卡入口提至所有页面首位
- [x] 图书馆定时抢座（AlarmManager + ForegroundService、认证预热、通知推送、进程保活提醒）

---

## 待开发 🔧

### P1 — 考勤异常推送提醒
**描述**：后台定期轮询考勤系统，当检测到异常记录（如旷课、迟到、缺勤）时推送通知。

**技术方案**：
- WorkManager 定期任务（间隔 4-8h）
- AttendanceLogin + API 获取最近考勤记录
- 与本地缓存对比，发现新异常 → NotificationCompat 推送
- 用户可设置提醒频率、免打扰时段

**预期工作量**：2-3 天

---

### P2 — 图书借阅管理
**描述**：查看当前借阅列表、到期提醒、续借操作。

**技术方案**：
- 对接图书馆借阅管理系统（www.lib.xjtu.edu.cn 或 OPAC）
- 解析借阅列表页面（HTML → 数据模型）
- 到期前 3 天 WorkManager 推送提醒
- 一键续借功能
- UI：借阅卡片列表 + 到期倒计时 + 续借按钮

**预期工作量**：3-5 天

---

### P3 — 课程日历导出 + 自定义补充课表
**描述**：
1. **日历导出**：将课表导出为 .ics 文件，可导入系统日历/Google Calendar
2. **自定义课表**：用户手动添加非教务系统课程（如社团活动、讲座等），与官方课表合并显示

**技术方案**：
- ICS 生成：按 RFC 5545 标准生成 VEVENT，包含课程名、教室、时间、重复规则（RRULE）
- 分享/保存：Intent.ACTION_SEND 或写入文件
- 自定义课表：Room 数据库存储自定义课程条目
- UI：课表页增加"添加课程"入口，编辑对话框（课名、教室、周次、节次）
- 导出按钮放在课表页 TopAppBar actions

**预期工作量**：4-6 天

---

## 备忘

- 任何编译操作需经用户明确许可
- Git proxy: `http://127.0.0.1:7890`
- JAVA_HOME: `C:\Program Files\Android\Android Studio\jbr`
